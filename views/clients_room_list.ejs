<!-- 내담자들이 선택한 방 목록 페이지 -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>내담자 방 목록</title>
</head>

<body>
    <!-- 내담자 방 목록 -->
    내담자 방 목록
    <a href="/counselors_room_list">LOGO_image</a>
    <a href="/counselors_room_list">상담자</a>
    <a href="/clients_room_list">내담자</a>
    <a href="/create_room">방 만들기</a>
    <a href="/my_profile_counselor">내 프로필</a>

    <hr>

    <div id="room_list_div"></div>

</body>
<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
<script>
(jQuery)(function($) {

        var host='localhost';
        var port='3000';
        var url='http://'+host+':'+port;
        var options={'forceNew':true};
        var socket=io.connect(url, options);

        socket.on('connect', function(){
            console.log('웹 소켓 서버에 연결되었습니다. : '+url);
        });

        socket.on('disconnect', function(){
            console.log('웹 소켓 연결이 종료되었습니다.');
        });



        socket.emit('request_room_list_client');

        socket.on('room_list_client', function(roomList){
            console.log('received room list of clients successfully.');

            var room_list_string='';


            for(var i=0;i<roomList.length;i++){
                room_list_string = room_list_string + (roomList[i])['room_creator_id'] + '\n';
            }

            console.log(room_list_string);

            $('#room_list_div').append(room_list_string);
        });



});
</script>
</html>
